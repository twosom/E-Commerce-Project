<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

    <!-- Icons -->
    <link href="/css/nucleo-icons.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>

    <!-- Soft UI Design System -->
    <link type="text/css" href="/css/soft-design-system-pro.min.css" rel="stylesheet">


    <title>E-Commerce</title>
</head>


<div th:fragment="uiScripts">
    <!--   Core JS Files   -->
    <script src="/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/js/core/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/plugins/perfect-scrollbar.min.js" type="text/javascript"></script>
    <script src="/js/plugins/moment.min.js"></script>
    <!-- Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="/js/plugins/nouislider.min.js"></script>

    <!--  Plugin for the Carousel, full documentation here: http://jedrzejchalubek.com/  -->
    <script src="/js/plugins/glidejs.min.js"></script>

    <!--	Plugin for Select, full documentation here: https://joshuajohnson.co.uk/Choices/ -->
    <script src="/js/plugins/choices.min.js" type="text/javascript"></script>


    <!-- Control Center for Soft UI Design System: parallax effects, scripts for the example pages etc -->
    <script src="/js/soft-design-system-pro.min.js" type="text/javascript"></script>
</div>


<!-- NAVIGATION_START -->
<span th:fragment="main-nav">
    <div class="container position-sticky z-index-sticky top-0">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navbar-expand-lg blur blur-rounded top-0 z-index-fixed shadow position-absolute my-3 py-2 start-0 end-0 mx-4 px-0">
                    <div class="container-fluid">
                        <a class="navbar-brand" href="/" th:href="@{/}">
                            <span class="text-muted">E-Commerce</span>
                        </a>
                        <button class="navbar-toggler shadow-none ms-md-2 collapsed" type="button"
                                data-bs-toggle="collapse"
                                data-bs-target="#navigation"
                                aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon mt-2">
                            <span class="navbar-toggler-bar bar1"></span>
                            <span class="navbar-toggler-bar bar2"></span>
                            <span class="navbar-toggler-bar bar3"></span>
                        </span>
                        </button>

                        <!-- NAVIGATION_ITEMS -->
                        <div class="collapse navbar-collapse" id="navigation">
                            <!-- SIGN_UP_LINK_ITEM -->
                            <ul class="navbar-nav justify-content-end ms-auto">
                                <!-- LOGIN -->
                                <li class="nav-item me-1" sec:authorize="isAnonymous()">
                                    <a class="nav-link" href="#" data-bs-toggle="modal"
                                       data-bs-target="#loginModal">로그인</a>
                                </li>
                                <!-- SIGN_UP -->
                                <li class="nav-item me-1" sec:authorize="isAnonymous()">
                                    <a class="nav-link" href="#" th:href="@{/sign-up}">가입</a>
                                </li>
                                <!-- NOTIFICATIONS -->
                                <li class="nav-item me-1 my-auto" sec:authorize="isAuthenticated()">
                                    <a class="nav-link" href="#" th:href="@{/notifications}">
                                        <i class="text-primary text-gradient fa fa-bell-o"
                                           style="font-size: 20px; font-weight: bold;" aria-hidden="true"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- LOGIN_MODAL -->
    <div class="modal fade" id="loginModal" sec:authorize="isAnonymous()" tabindex="-1"
         aria-labelledby="loginModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 350px;">
            <!-- CONTENT -->
            <div class="modal-content">
                <!-- BODY -->
                <div class="modal-body p-0">
                    <div class="card card-plain">
                        <div class="card-header pb-0 text-left">
                            <h3 class="font-weight-bolder text-info text-gradient">잘 돌아오셨어요!</h3>
                            <p class="mb-0">로그인 하시려면 이메일 또는 닉네임과 패스워드를 입력해주세요.</p>
                        </div>
                    </div>

                    <div class="card-body">
                        <form action="#" th:action="@{/login}" method="post" class="needs-validation" novalidate>
                            <div class="form-group">
                                <label for="username">이메일 또는 닉네임</label>
                                <input id="username" name="username" type="text" class="form-control"
                                       placeholder="your@email.com"
                                       aria-describedby="emailHelp" required>
                                <small id="emailHelp" class="form-text text-muted">
                                    가입할 때 사용한 이메일 또는 닉네임을 입력하세요.
                                </small>
                                <small class="invalid-feedback">이메일을 입력하세요.</small>
                            </div>
                            <div class="form-group">
                                <label for="password">비밀번호</label>
                                <input id="password" name="password" type="password" class="form-control"
                                       placeholder="Password"
                                       aria-describedby="passwordHelp" required/>
                                <small id="passwordHelp" class="form-text text-muted">
                                    패스워드가 기억나지 않는다면, <strong><a href="#"
                                                                th:href="@{/email-login}">패스워드 없이 로그인하기</a></strong>
                                </small>
                                <small class="invalid-feedback">패스워드를 입력하세요.</small>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="remember-me" name="remember-me"
                                       checked>
                                <label class="form-check-label" for="remember-me">로그인 유지</label>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn bg-gradient-info w-100 mt-4 mb-0">Sign in</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script sec:authorize="isAnonymous()" th:replace="fragments.html::validate-form"></script>
</span>
<!-- NAVIGATION_END -->

<!-- FORM_VALIDATION -->
<script th:fragment="validate-form">
    (function () {
        'use strict';

        const forms = document.getElementsByClassName('needs-validation');

        Array.prototype.filter.call(forms, function (form) {
            form.onsubmit = function (event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            };
        }, false);
    }());
</script>

</html>